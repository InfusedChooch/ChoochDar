<Window x:Class="eft_dma_shared.Common.UI.Controls.TextInputWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:hc="https://handyorg.github.io/handycontrol"
        xmlns:local="clr-namespace:eft_dma_shared.Common.UI.Controls"
        Title="Text Input"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="NoResize"
        ShowInTaskbar="False"
        WindowStartupLocation="CenterOwner"
        SizeToContent="WidthAndHeight"
        MinWidth="350"
        MaxWidth="600">

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </Window.Resources>

    <Border Background="{DynamicResource RegionBrush}"
            BorderBrush="{DynamicResource BorderBrush}"
            BorderThickness="1"
            CornerRadius="8"
            Effect="{StaticResource PanelShadow}">

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <Border Grid.Row="0" Style="{StaticResource PanelHeader}" MinHeight="32">
                <Grid>
                    <TextBlock Text="{Binding DisplayTitle}"
                              Style="{StaticResource PanelHeaderText}"
                              VerticalAlignment="Center"/>
                </Grid>
            </Border>

            <!-- Content -->
            <StackPanel Grid.Row="1" Margin="20" Orientation="Vertical">
                <!-- Prompt Text (if any) -->
                <TextBlock Text="{Binding PromptText}"
                          Style="{StaticResource MessageBoxContentText}"
                          MaxWidth="500"
                          Margin="0,0,0,10"
                          TextWrapping="Wrap"
                          Visibility="{Binding ShowPrompt, Converter={StaticResource BooleanToVisibilityConverter}}"/>

                <!-- Text Input -->
                <hc:TextBox x:Name="txtInput"
                           Text="{Binding InputText, UpdateSourceTrigger=PropertyChanged}"
                           Width="{Binding InputWidth}"
                           Height="{Binding InputHeight}"
                           AcceptsReturn="{Binding IsMultiline}"
                           TextWrapping="{Binding TextWrapping}"
                           VerticalScrollBarVisibility="{Binding VerticalScrollBarVisibility}"
                           HorizontalScrollBarVisibility="{Binding HorizontalScrollBarVisibility}"
                           MaxLength="{Binding MaxLength}"
                           hc:InfoElement.Placeholder="{Binding PlaceholderText}"/>
            </StackPanel>

            <!-- Buttons -->
            <Border Grid.Row="2" 
                    Background="{DynamicResource SecondaryRegionBrush}"
                    BorderBrush="{DynamicResource BorderBrush}"
                    BorderThickness="0,1,0,0"
                    CornerRadius="0,0,8,8">

                <StackPanel Orientation="Horizontal" 
                           HorizontalAlignment="Right" 
                           Margin="15,10">

                    <Button x:Name="btnClear" 
                            Content="Clear"
                            Style="{StaticResource MessageBoxSecondaryButton}"
                            Click="btnClear_Click"
                            Height="28"
                            Margin="0,0,8,0"
                            Visibility="{Binding ShowClearButton, Converter={StaticResource Boolean2VisibilityConverter}}"/>

                    <Button x:Name="btnCancel" 
                            Content="Cancel"
                            Style="{StaticResource MessageBoxSecondaryButton}"
                            Click="btnCancel_Click"
                            Height="28"
                            Margin="0,0,8,0"/>

                    <Button x:Name="btnOK" 
                            Content="{Binding OkButtonText}"
                            Style="{StaticResource MessageBoxPrimaryButton}"
                            Click="btnOK_Click"
                            Height="28"
                            IsDefault="True"/>
                </StackPanel>
            </Border>
        </Grid>
    </Border>
</Window>